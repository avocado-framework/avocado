os: linux
dist: focal
language: python
cache: pip
arch: amd64

python:
    - "3.8"

env:
      AVOCADO_LOG_DEBUG=yes
      AVOCADO_CHECK_LEVEL=1

addons:
  apt:
    packages:
    - enchant
    - hunspell-en-us
    - golang

script:
    - python3 -m avocado --show=all run selftests/functional/test_sysinfo.py:SysInfoTest.test_sysinfo_html_output
    - cat ~/avocado/job-results/latest/test-results/1*/*

jobs:
  include:
    - python: "3.8"
      arch: arm64
      env:
        - AVOCADO_PARALLEL_LINT_JOBS=1
      # Travis arm64 builders currently shows:
      # [Errno 13] Permission denied: '/home/travis/.cache/pip/wheels/xx'
      # Disable pip cache dir temporarily
      install:
       - pip install --no-cache-dir -r requirements-selftests.txt
       - python3 setup.py develop
       - python3 optional_plugins/html/setup.py develop
